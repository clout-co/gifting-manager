@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 249, 250, 251;
  --background-end-rgb: 255, 255, 255;
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
      135deg,
      rgb(var(--background-start-rgb)) 0%,
      rgb(var(--background-end-rgb)) 100%
    );
  min-height: 100vh;
  font-feature-settings: 'palt';
  letter-spacing: 0.02em;
}

/* スムーズスクロール */
html {
  scroll-behavior: smooth;
}

/* カスタムスクロールバー */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Selection */
::selection {
  background: rgba(31, 41, 55, 0.15);
}

@layer base {
  /* フォーカスリングのカスタマイズ */
  *:focus-visible {
    @apply outline-none ring-2 ring-gray-400/40 ring-offset-2 ring-offset-white;
  }
}

@layer components {
  /* ボタン - プライマリ */
  .btn-primary {
    @apply relative overflow-hidden bg-gray-800 text-white px-5 py-2.5 rounded-xl
           font-medium transition-all duration-300 ease-out
           hover:bg-gray-900 hover:shadow-lg hover:shadow-gray-800/25
           active:scale-[0.98] transform;
  }

  .btn-primary::after {
    content: '';
    @apply absolute inset-0 bg-white/10 opacity-0 transition-opacity duration-300;
  }

  .btn-primary:hover::after {
    @apply opacity-100;
  }

  /* ボタン - セカンダリ */
  .btn-secondary {
    @apply relative bg-white text-gray-700 px-5 py-2.5 rounded-xl
           border border-gray-200 font-medium
           transition-all duration-300 ease-out
           hover:bg-gray-50 hover:border-gray-300 hover:shadow-md
           active:scale-[0.98] transform;
  }

  /* ボタン - ゴースト */
  .btn-ghost {
    @apply text-gray-600 px-4 py-2 rounded-xl
           transition-all duration-300 ease-out
           hover:bg-gray-100 hover:text-gray-900
           active:scale-[0.98] transform;
  }

  /* ボタン - デンジャー */
  .btn-danger {
    @apply bg-gray-600 text-white px-5 py-2.5 rounded-xl
           font-medium transition-all duration-300 ease-out
           hover:bg-gray-700 hover:shadow-lg
           active:scale-[0.98] transform;
  }

  /* 入力フィールド */
  .input-field {
    @apply w-full px-4 py-3 border border-gray-200 rounded-xl
           bg-white text-gray-900 placeholder:text-gray-400
           transition-all duration-300 ease-out
           hover:border-gray-300
           focus:outline-none focus:border-gray-400 focus:ring-4 focus:ring-gray-100;
  }

  /* カード - ベース */
  .card {
    @apply bg-white rounded-2xl p-6
           border border-gray-100 shadow-sm
           transition-all duration-300 ease-out;
  }

  /* カード - ホバー付き */
  .card-hover {
    @apply card cursor-pointer
           hover:shadow-lg hover:shadow-gray-200/50
           hover:border-gray-200 hover:-translate-y-0.5;
  }

  /* カード - インタラクティブ */
  .card-interactive {
    @apply card cursor-pointer
           hover:shadow-xl hover:shadow-gray-200/60
           hover:border-gray-300 hover:-translate-y-1
           active:translate-y-0 active:shadow-md;
  }

  /* 統計カード */
  .stat-card {
    @apply bg-white rounded-2xl p-5
           border border-gray-100 shadow-sm
           transition-all duration-300 ease-out
           hover:shadow-md hover:border-gray-200;
  }

  /* グラスモーフィズム */
  .glass {
    @apply bg-white/80 backdrop-blur-xl border border-gray-200/50
           shadow-lg shadow-gray-100/50;
  }

  /* テーブルヘッダー */
  .table-header {
    @apply text-left text-xs font-semibold
           text-gray-500 uppercase tracking-wider
           bg-gray-50/80 backdrop-blur-sm;
  }

  /* テーブルセル */
  .table-cell {
    @apply px-6 py-4 whitespace-nowrap text-sm text-gray-700;
  }

  /* テーブル行 */
  .table-row {
    @apply border-b border-gray-100
           transition-colors duration-200
           hover:bg-gray-50/80;
  }

  /* ステータスバッジ - 合意 */
  .status-agree {
    @apply inline-flex items-center gap-1.5
           bg-gray-800 text-white
           px-3 py-1.5 rounded-full text-xs font-semibold
           shadow-sm;
  }

  /* ステータスバッジ - 不合意 */
  .status-disagree {
    @apply inline-flex items-center gap-1.5
           bg-gray-400 text-white
           px-3 py-1.5 rounded-full text-xs font-semibold;
  }

  /* ステータスバッジ - 保留 */
  .status-pending {
    @apply inline-flex items-center gap-1.5
           bg-gray-100 text-gray-700 border border-gray-200
           px-3 py-1.5 rounded-full text-xs font-semibold;
  }

  /* ステータスバッジ - キャンセル */
  .status-cancelled {
    @apply inline-flex items-center gap-1.5
           bg-gray-50 text-gray-500 border border-gray-100
           px-3 py-1.5 rounded-full text-xs font-semibold;
  }

  /* ステータスバッジ - 無視 */
  .status-ignored {
    @apply inline-flex items-center gap-1.5
           bg-white text-gray-400 border border-gray-100
           px-3 py-1.5 rounded-full text-xs font-semibold;
  }

  /* ディバイダー */
  .divider {
    @apply border-t border-gray-100 my-6;
  }

  /* セクションタイトル */
  .section-title {
    @apply text-lg font-semibold text-gray-900 mb-4
           flex items-center gap-2;
  }

  /* アバター */
  .avatar {
    @apply w-10 h-10 rounded-full bg-gray-100
           flex items-center justify-center
           text-gray-600 font-medium text-sm
           border-2 border-white shadow-sm;
  }

  /* チップ/タグ */
  .chip {
    @apply inline-flex items-center gap-1
           px-2.5 py-1 rounded-lg
           text-xs font-medium
           bg-gray-100 text-gray-700
           transition-colors duration-200
           hover:bg-gray-200;
  }

  /* ツールチップ */
  .tooltip {
    @apply absolute z-50 px-3 py-2 text-xs
           bg-gray-900 text-white rounded-lg
           shadow-lg opacity-0 invisible
           transition-all duration-200
           group-hover:opacity-100 group-hover:visible;
  }

  /* プログレスバー */
  .progress-bar {
    @apply h-2 rounded-full bg-gray-100 overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full rounded-full bg-gray-800
           transition-all duration-500 ease-out;
  }

  /* ローディングスケルトン */
  .skeleton {
    @apply bg-gradient-to-r from-gray-100 via-gray-50 to-gray-100
           bg-[length:200%_100%] animate-[shimmer_2s_infinite]
           rounded-lg;
  }

  /* グラデーションテキスト */
  .gradient-text {
    @apply text-gray-900;
  }

  /* フローティングラベル */
  .floating-label {
    @apply absolute left-4 top-3 text-gray-400
           transition-all duration-200 pointer-events-none
           peer-focus:-top-2 peer-focus:left-3 peer-focus:text-xs
           peer-focus:text-gray-600 peer-focus:bg-white peer-focus:px-1;
  }

  /* アイコンボタン */
  .icon-btn {
    @apply p-2 rounded-xl text-gray-500
           transition-all duration-200
           hover:bg-gray-100 hover:text-gray-700
           active:scale-95;
  }

  /* 数値ハイライト */
  .number-highlight {
    @apply font-semibold tabular-nums tracking-tight;
  }
}

/* アニメーション定義 */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(16px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.96);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes pulseSoft {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@keyframes bounce-subtle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
}

/* アニメーションユーティリティ */
.animate-fade-in {
  animation: fadeIn 0.4s ease-out forwards;
}

.animate-slide-up {
  animation: slideUp 0.4s ease-out forwards;
}

.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out forwards;
}

.animate-scale-in {
  animation: scaleIn 0.3s ease-out forwards;
}

.animate-pulse-soft {
  animation: pulseSoft 2s ease-in-out infinite;
}

.animate-bounce-subtle {
  animation: bounce-subtle 2s ease-in-out infinite;
}

/* ダークモードサポート */
.dark {
  --foreground-rgb: 255, 255, 255;
  --background-start-rgb: 17, 24, 39;
  --background-end-rgb: 31, 41, 55;
}

.dark body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
    135deg,
    rgb(var(--background-start-rgb)) 0%,
    rgb(var(--background-end-rgb)) 100%
  );
}

.dark ::selection {
  background: rgba(255, 255, 255, 0.2);
}

/* ダークモード用のコンポーネントスタイル */
.dark .card,
.dark .card-hover,
.dark .card-interactive {
  @apply bg-gray-800/90 border-gray-700/50 shadow-gray-900/30;
}

.dark .stat-card {
  @apply bg-gray-800/90 border-gray-700/50 shadow-gray-900/30;
}

.dark .input-field {
  @apply bg-gray-800 border-gray-700 text-white placeholder:text-gray-500
         hover:border-gray-600 focus:border-gray-500 focus:ring-gray-700;
}

.dark .btn-secondary {
  @apply bg-gray-800 text-gray-200 border-gray-700 hover:bg-gray-700 hover:border-gray-600;
}

.dark .table-header {
  @apply bg-gray-800/80 text-gray-400;
}

.dark .table-cell {
  @apply text-gray-300;
}

.dark .table-row {
  @apply hover:bg-gray-800/50 border-gray-700/50;
}

.dark .chip {
  @apply bg-gray-700 text-gray-300 hover:bg-gray-600;
}

.dark .skeleton {
  @apply from-gray-700 via-gray-600 to-gray-700;
}

/* ライトモードのデフォルト */
:root:not(.dark) {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 249, 250, 251;
  --background-end-rgb: 255, 255, 255;
}

/* 入力フィールドの文字色 */
:root:not(.dark) input,
:root:not(.dark) select,
:root:not(.dark) textarea {
  color: #1f2937 !important;
  background-color: white !important;
}

:root:not(.dark) input::placeholder,
:root:not(.dark) textarea::placeholder {
  color: #9ca3af !important;
}

.dark input,
.dark select,
.dark textarea {
  color: white !important;
  background-color: rgb(31, 41, 55) !important;
}

.dark input::placeholder,
.dark textarea::placeholder {
  color: rgb(107, 114, 128) !important;
}

/* ダークモード用スクロールバー */
.dark ::-webkit-scrollbar-thumb {
  background: #4b5563;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

/* Safe area for iOS devices */
.safe-area-pb {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

.safe-area-pt {
  padding-top: env(safe-area-inset-top, 0);
}

/* モバイル最適化 */
@media (max-width: 1023px) {
  .btn-primary,
  .btn-secondary {
    min-height: 44px;
  }

  .table-container {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  .input-field {
    font-size: 16px;
  }
}

/* タッチデバイス用 */
@media (hover: none) {
  .hover\:bg-gray-50:hover {
    background-color: transparent;
  }

  .card-hover:hover,
  .card-interactive:hover {
    transform: none;
    box-shadow: inherit;
  }
}

/* プルリフレッシュ防止 */
html {
  overscroll-behavior-y: contain;
}

/* スムーズなページ遷移 */
[data-page-transition] {
  @apply transition-opacity duration-300;
}

/* フォーカストラップ */
.focus-trap:focus-within {
  @apply ring-2 ring-gray-300 ring-offset-2;
}
